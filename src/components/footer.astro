---
import * as fs from "node:fs";
import * as path from "node:path";

import { footerConfig } from "@/config";


// HTML 内容获取逻辑
let customFooterHtml = "";
if (footerConfig.enable) {
    // 优先使用 customHtml，如果为空则使用 FooterConfig.html 文件内容
    if (footerConfig.customHtml && footerConfig.customHtml.trim() !== "") {
        customFooterHtml = footerConfig.customHtml.trim();
    } else {
        // customHtml 为空时，读取 FooterConfig.html 文件内容
        try {
            const footerConfigPath = path.join(
                process.cwd(),
                "public",
                "FooterConfig.html",
            );
            customFooterHtml = fs.readFileSync(footerConfigPath, "utf-8");
            // 移除HTML注释
            customFooterHtml = customFooterHtml.replace(/<!--[\s\S]*?-->/g, "").trim();
        } catch (error) {
            console.warn("FooterConfig.html文件读取失败:", error.message);
        }
    }
}
---

<div class="transition border-t border-black/10 dark:border-white/15 my-10 border-dashed mx-32"></div>
<div class="transition border-dashed border-[oklch(85%_0.01_var(--hue))] dark:border-white/15 rounded-2xl mb-12 flex flex-col items-center justify-center px-6">
    <div class="transition text-50 text-sm text-center">
        {customFooterHtml && (
            <div class="mb-2" set:html={customFooterHtml}></div>
        )}
        &copy; 2026 AI. All Rights Reserved.<br>
        Powered by
        <a class="transition link text-(--primary) font-medium" target="_blank" href="https://astro.build">Astro</a> &
        <a class="transition link text-(--primary) font-medium" target="_blank" href="https://github.com/Chen017/Blog">Theme</a> (<a class="transition link text-(--primary) font-medium" target="_blank" href="https://github.com/Spr-Aachen/Twilight">Upstream</a>)<br>

    </div>
</div>